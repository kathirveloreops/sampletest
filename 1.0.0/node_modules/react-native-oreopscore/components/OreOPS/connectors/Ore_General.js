import axios from 'axios';

// Taking Indian Standard using this URL
const URL = 'https://worldtimeapi.org/api/timezone/Asia/Kolkata';

// Method for returning object from response data
const OreResponse = (status, statuscode, data, error) => {
    return new Promise(function (resolve) {
        resolve({ status: status, statuscode: statuscode, data: data, error: error });
    });
}

// Method for getting Current Date and Time
const GetCurrentDateTime = async () => {
    try {
        const response = await axios.get(URL);
        let result = response.data;
        return OreResponse(true, 200, result.datetime, []);
    }
    catch (err) {
        return OreResponse(false, 404, [], err.toString());
    }
}

// Method for getting current date
const GetCurrentDate = async () => {
    try {
        const response = await axios.get(URL);
        let result = response.data;
        let date = result.datetime;
        const curdate = new Date(date)
        var fndate = curdate.toLocaleString("en-IN").split(',')[0];
        return OreResponse(true, 200, fndate, []);
    }
    catch (err) {
        return OreResponse(false, 404, [], err.toString());
    }
}

//Method for getting Current Time
const GetCurrentTime = async () => {
    try {
        const response = await axios.get(URL);
        let result = response.data;
        const cundate = new Date(result.datetime);
        var time = cundate.getHours() + ":" + cundate.getMinutes() + ":" + cundate.getSeconds()
        return OreResponse(true, 200, time, []);
    }
    catch (err) {
        return OreResponse(false, 404, [], err.toString());
    }
}

export default { GetCurrentDateTime, GetCurrentDate, GetCurrentTime }